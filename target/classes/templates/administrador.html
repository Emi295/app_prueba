<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mantenimiento Empleado - S-Manga</title>

	<!-- Favicon Icon -->
    <link rel="shortcut icon" href="/resources/img/logo.png" type="image/x-icon">
    
    <!-- Start Include All CSS -->
    <link rel="stylesheet" href="/resources/css/index.css">
    <link rel="stylesheet" href="/resources/css/menu-vertical.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="/resources/css/datatables.css">
    
	 <!-- Alert Messages CSS -->
	<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
	<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/default.min.css"/>
	<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/semantic.min.css"/>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">
	<!-- End Include All CSS -->
</head>

<body>

	<!-- Fragment Header -->
	<div th:replace="~{/fragments/header :: myheader}"></div>
	<br>
	<br>

    <!-- SubTitle-->
    <div class="container d-flex align-items-center pt-5">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-gear-wide-connected" viewBox="0 0 16 16">
  		<path d="M7.068.727c.243-.97 1.62-.97 1.864 0l.071.286a.96.96 0 0 0 1.622.434l.205-.211c.695-.719 1.888-.03 1.613.931l-.08.284a.96.96 0 0 0 1.187 1.187l.283-.081c.96-.275 1.65.918.931 1.613l-.211.205a.96.96 0 0 0 .434 1.622l.286.071c.97.243.97 1.62 0 1.864l-.286.071a.96.96 0 0 0-.434 1.622l.211.205c.719.695.03 1.888-.931 1.613l-.284-.08a.96.96 0 0 0-1.187 1.187l.081.283c.275.96-.918 1.65-1.613.931l-.205-.211a.96.96 0 0 0-1.622.434l-.071.286c-.243.97-1.62.97-1.864 0l-.071-.286a.96.96 0 0 0-1.622-.434l-.205.211c-.695.719-1.888.03-1.613-.931l.08-.284a.96.96 0 0 0-1.186-1.187l-.284.081c-.96.275-1.65-.918-.931-1.613l.211-.205a.96.96 0 0 0-.434-1.622l-.286-.071c-.97-.243-.97-1.62 0-1.864l.286-.071a.96.96 0 0 0 .434-1.622l-.211-.205c-.719-.695-.03-1.888.931-1.613l.284.08a.96.96 0 0 0 1.187-1.186l-.081-.284c-.275-.96.918-1.65 1.613-.931l.205.211a.96.96 0 0 0 1.622-.434l.071-.286zM12.973 8.5H8.25l-2.834 3.779A4.998 4.998 0 0 0 12.973 8.5zm0-1a4.998 4.998 0 0 0-7.557-3.779l2.834 3.78h4.723zM5.048 3.967c-.03.021-.058.043-.087.065l.087-.065zm-.431.355A4.984 4.984 0 0 0 3.002 8c0 1.455.622 2.765 1.615 3.678L7.375 8 4.617 4.322zm.344 7.646.087.065-.087-.065z"/>
		</svg>
        <h3 class="m-0 ps-1">Mantenimiento Empleado</h3>
    </div>
    
    <div class="container">
        <hr>
        <!-- Button Grabar -->
        <div class="d-flex align-items-center justify-content-between">
            <a th:href="@{/administrador/nuevo}" class="btn btn-sm btn-success px-3" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-plus-square" viewBox="0 0 18 18">
                    <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                </svg> Agregar Nuevo/a
            </a>
            <!-- Report -->
            <div class="btn-group dropstart">
                <button type="button" class="btn btn-sm btn-secondary dropdown-toggle px-3" data-bs-toggle="dropdown" aria-expanded="false">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-file-earmark-check" viewBox="0 0 18 18">
                        <path d="M10.854 7.854a.5.5 0 0 0-.708-.708L7.5 9.793 6.354 8.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"/>
                        <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>
                    </svg>Generar Reporte
                </button>
                <ul class="dropdown-menu dropdown-menu-dark">
                    <li><a class="dropdown-item" href="#">PDF</a></li>
                    <li><a class="dropdown-item" href="#">JSON</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container my-3">
        <table id="datatable-spanish" class="table table-striped table-bordered border-bottom-0 shadow pt-2">
            <thead class="table-primary">
                <tr>
                    <th>Id</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Dni</th>
                    <th>Email</th>
                    <th>Telefono</th>
                    <th>Fec.Nac.</th>
                    <th>Perfil</th>
                    <th>Usuario</th>
                    <th>Clave</th>
                    <th>Rol</th>
                    <th class="text-center">Opciones</th>
                </tr>
            </thead>         
            <tbody>
               <tr th:each="row:${listAdmin}">
                   <td th:text="${row.codAdm}"></td>
                   <td th:text="${row.nomAdm}"></td>
                   <td th:text="${row.apeAdm}"></td>
                   <td th:text="${row.dniAdm}"></td>
                   <td th:text="${row.emaAdm}"></td>
                   <td th:text="${row.telAdm}"></td>
                   <td th:text="${row.fecNac}"></td>
                   <td class="text-center"><img th:src="@{'/administrador/uploads/' + ${row.image}}" class="object-fit-cover rounded-circle" style="height: 50px; width: 50px;" alt="Image"></td>
                   <td th:text="${row.userAdm}"></td>
                   <td th:text="${row.clave}"></td>
                   <td th:text="${row.AdministradorRol.nomRol}"></td>
                   <td class="d-flex align-items-center justify-content-between">
                   	<!-- Button Detail -->
					<a th:href="@{'/administrador/detalle/' + ${row.codAdm}}" class="btn btn-sm btn-success border-0">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-card-image" viewBox="0 0 16 17"><path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/><path d="M1.5 2A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13zm13 1a.5.5 0 0 1 .5.5v6l-3.775-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12v.54A.505.505 0 0 1 1 12.5v-9a.5.5 0 0 1 .5-.5h13z"/></svg>
					</a>
                    <!-- Button Update -->
                    <a th:href="@{'/administrador/actualizar/' + ${row.codAdm}}" class="btn btn-sm btn-primary border-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 17">
                            <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                            <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"/>
                        </svg>
                    </a>
                     <!-- Button Delete -->
                     <a th:href="@{'/administrador/delete/' + ${row.codAdm}}" class="btn btn-sm btn-danger border-0 btn-eliminar">
                     	<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 17">
				 		<path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
				 		<path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
						</svg>
                     </a>
                   </td>
               </tr>
            </tbody>
        </table>
    </div>
    
    <!-- Card Detail Administrator Start -->
    <div class="position-relative top-50 start-50 translate-middle" th:each="admin:${admin}" style="width: 500px">
		<div class="container">
			<div class="row">
				<div class="col-md-6 offset-md-3">
					<div class="card shadow">
						<!-- Content -->
						<img th:if="${admin.image}" th:src="@{'/administrador/uploads/' + ${admin.image}}" class="card-img-top" alt="Administrador Image">
						<div class="card-body text-center">
							<p class="fs-5" th:text="${admin.codAdm}"></p>
							<h5 class="card-title" th:text="${admin.nomAdm}"></h5>
							<p class="card-text" th:text="${admin.apeAdm}"></p>
							<!-- Button Regresar -->
							<a th:href="@{/administrador/lista}" class="btn btn-dark col-12">Regresar</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>   
	<!-- Card Detail Administrator End -->
	
	<!-- Fragment Footer -->
	<div th:replace="~{/fragments/footer :: myfooter}"></div>
	
	<!-- Start Include All JS -->
	<script src="/resources/js/jquery-3.6.0.js"></script>
    <script src="/resources/js/plugins.js"></script>
    <script src="/resources/js/menu-vertical.js"></script>
    <script src="/resources/js/back-top.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <script src="/resources/js/datatables.js"></script>
    <script src="/resources/js/datatables-language.js"></script>
	
    <!-- Alert Messages JS -->
	<script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <!-- End Include All JS -->
    
    <!-- Se utiliza para mostrar mensajes de manera visual y atractiva  -->
    <script th:inline="javascript" th:if="${mensaje != null}">
		let msj;
		msj = /*[[${mensaje}]]*/
	
	 	toastr.success(msj, "Mensaje: ", {
		    "timeOut": "9000",
		    "extendedTImeout": "9000",
		    "positionClass ": " toast-top-right ",
		});
	</script>
	
	<script>
		/*	Se agrega un EventListener a cada elemento del DOM que tenga la clase "btn-eliminar". 
			El evento escuchado es el click del btn-eliminar. Al hacer clic en el elemento, 
			primero se detiene el evento (con event.preventDefault()) para evitar que se realice la acción predeterminada, 
			que en este caso es seguir el enlace del elemento. 
		var enlaceEliminar = document.getElementsByClassName("btn-eliminar");
		for (var i = 0; i < enlaceEliminar.length; i++) {
		  enlaceEliminar[i].addEventListener("click", function(event) {
			// Detener el evento
		    event.preventDefault();
			
			// Se obtiene el atributo "href" del elemento clickeado
		    var url = event.target.getAttribute("href");
			
		    alertify.confirm('Alerta!', '¿Está seguro que desea eliminar este registro?', 
		      function() { 
		    	// Se redirige a la URL obtenido; que es la eliminacion
		        window.location.href = url;
		      },
		      function() {
		        alertify.error('Acción Cancelada');
		      }
		    ).set('labels', {ok:'Sí', cancel:'Cancelar'});
		  });
		}
		*/
		
		/* agrega un event listener a todos los elementos con la clase "btn-eliminar" en la página, 
		y muestra un cuadro de diálogo de confirmación para pedir la confirmación del usuario 
		antes de eliminar un registro. */
		var enlaceEliminar = document.getElementsByClassName("btn-eliminar");
		
		// for para agregar el event listener a todos los elementos que tienen la clase "btn-eliminar" en la página
		for (var i = 0; i < enlaceEliminar.length; i++) {
			enlaceEliminar[i].addEventListener("click", function(event) {
		    if (confirm("¿Está seguro que desea eliminar este registro?") == false) {
		      event.preventDefault();
		    }
		  });
		}
	</script>
</body>
</html>